{
  "swagger": "2.0",
  "info": {
    "title": "api/coupon.proto",
    "version": "version not set"
  },
  "tags": [
    {
      "name": "Coupon"
    },
    {
      "name": "CouponInternal"
    }
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/coupon/cms/list": {
      "get": {
        "operationId": "Coupon_ListCouponForCms",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/couponListCouponForCmsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "pageIndex",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "pageSize",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "customerIds",
            "in": "query",
            "required": false,
            "type": "array",
            "items": {
              "type": "string"
            },
            "collectionFormat": "multi"
          },
          {
            "name": "serviceIds",
            "in": "query",
            "required": false,
            "type": "array",
            "items": {
              "type": "string"
            },
            "collectionFormat": "multi"
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "type": "string",
            "enum": [
              "COUPON_STATUS_UNKNOWN",
              "COUPON_STATUS_ACTIVE",
              "COUPON_STATUS_USED",
              "COUPON_STATUS_EXPIRED",
              "COUPON_STATUS_DISABLED"
            ],
            "default": "COUPON_STATUS_UNKNOWN"
          }
        ],
        "tags": [
          "Coupon"
        ]
      }
    },
    "/coupon/create": {
      "post": {
        "operationId": "Coupon_CreateCoupon",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/couponCreateCouponResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/couponCreateCouponRequest"
            }
          }
        ],
        "tags": [
          "Coupon"
        ]
      }
    },
    "/coupon/currency": {
      "get": {
        "operationId": "Coupon_ListCurrency",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/couponListCurrencyResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "searchContent",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "pageIndex",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "pageSize",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          }
        ],
        "tags": [
          "Coupon"
        ]
      }
    },
    "/coupon/customer/list": {
      "get": {
        "operationId": "Coupon_ListCouponForCustomer",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/couponListCouponForCustomerResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "pageIndex",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "pageSize",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "storeId",
            "in": "query",
            "required": false,
            "type": "array",
            "items": {
              "type": "string"
            },
            "collectionFormat": "multi"
          },
          {
            "name": "serviceIds",
            "in": "query",
            "required": false,
            "type": "array",
            "items": {
              "type": "string"
            },
            "collectionFormat": "multi"
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "type": "string",
            "enum": [
              "COUPON_STATUS_UNKNOWN",
              "COUPON_STATUS_ACTIVE",
              "COUPON_STATUS_USED",
              "COUPON_STATUS_EXPIRED",
              "COUPON_STATUS_DISABLED"
            ],
            "default": "COUPON_STATUS_UNKNOWN"
          }
        ],
        "tags": [
          "Coupon"
        ]
      }
    },
    "/coupon/delete": {
      "post": {
        "operationId": "Coupon_DeleteCoupon",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "type": "object",
              "properties": {}
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/couponDeleteCouponRequest"
            }
          }
        ],
        "tags": [
          "Coupon"
        ]
      }
    },
    "/coupon/milestone": {
      "get": {
        "operationId": "Coupon_ListMileStone",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/couponListMileStoneResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "pageIndex",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "pageSize",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "storeIds",
            "in": "query",
            "required": false,
            "type": "array",
            "items": {
              "type": "string"
            },
            "collectionFormat": "multi"
          }
        ],
        "tags": [
          "Coupon"
        ]
      },
      "post": {
        "operationId": "Coupon_CreateMileStone",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/couponCreateMileStoneResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/couponCreateMileStoneRequest"
            }
          }
        ],
        "tags": [
          "Coupon"
        ]
      }
    },
    "/coupon/milestone/delete": {
      "post": {
        "operationId": "Coupon_DeleteMileStone",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "type": "object",
              "properties": {}
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/couponDeleteMileStoneRequest"
            }
          }
        ],
        "tags": [
          "Coupon"
        ]
      }
    },
    "/couponint/confirm-usage": {
      "post": {
        "operationId": "CouponInternal_ConfirmCouponUsage",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "type": "object",
              "properties": {}
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/couponConfirmCouponUsageRequest"
            }
          }
        ],
        "tags": [
          "CouponInternal"
        ]
      }
    },
    "/couponint/reserve": {
      "post": {
        "operationId": "CouponInternal_ReserveCoupon",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "type": "object",
              "properties": {}
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/couponReserveCouponRequest"
            }
          }
        ],
        "tags": [
          "CouponInternal"
        ]
      }
    },
    "/couponint/unreserve": {
      "post": {
        "operationId": "CouponInternal_UnReserveCoupon",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "type": "object",
              "properties": {}
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/couponUnReserveCouponRequest"
            }
          }
        ],
        "tags": [
          "CouponInternal"
        ]
      }
    }
  },
  "definitions": {
    "CreateMileStoneRequestMilestoneReward": {
      "type": "object",
      "properties": {
        "couponValue": {
          "type": "number",
          "format": "double"
        },
        "expiredDuration": {
          "type": "number",
          "format": "double"
        },
        "currencyId": {
          "type": "string",
          "format": "uint64"
        },
        "usageLimit": {
          "type": "integer",
          "format": "int32"
        },
        "milestoneId": {
          "type": "string",
          "format": "uint64"
        },
        "serviceIds": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uint64"
          }
        }
      }
    },
    "couponConfirmCouponUsageRequest": {
      "type": "object",
      "properties": {
        "bookingId": {
          "type": "string"
        },
        "storeId": {
          "type": "string"
        }
      }
    },
    "couponCouponStatus": {
      "type": "string",
      "enum": [
        "COUPON_STATUS_UNKNOWN",
        "COUPON_STATUS_ACTIVE",
        "COUPON_STATUS_USED",
        "COUPON_STATUS_EXPIRED",
        "COUPON_STATUS_DISABLED"
      ],
      "default": "COUPON_STATUS_UNKNOWN"
    },
    "couponCouponType": {
      "type": "string",
      "enum": [
        "COUPON_TYPE_UNKNOWN",
        "COUPON_TYPE_PERCENTAGE",
        "COUPON_TYPE_FIXED"
      ],
      "default": "COUPON_TYPE_UNKNOWN"
    },
    "couponCouponUsage": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "format": "uint64"
        },
        "bookingId": {
          "type": "string"
        },
        "serviceIds": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "customerId": {
          "type": "string"
        },
        "status": {
          "$ref": "#/definitions/couponCouponUsedStatus"
        },
        "reservedAt": {
          "type": "string",
          "format": "date-time"
        },
        "usedAt": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "couponCouponUsedStatus": {
      "type": "string",
      "enum": [
        "COUPON_USED_STATUS_UNKNOWN",
        "COUPON_USED_STATUS_RESERVED",
        "COUPON_USED_STATUS_USED"
      ],
      "default": "COUPON_USED_STATUS_UNKNOWN"
    },
    "couponCreateCouponRequest": {
      "type": "object",
      "properties": {
        "expiredDuration": {
          "type": "number",
          "format": "double"
        },
        "customerId": {
          "type": "string"
        },
        "serviceIds": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "currencyId": {
          "type": "string",
          "format": "uint64"
        },
        "usageLimit": {
          "type": "integer",
          "format": "int32"
        },
        "couponValue": {
          "type": "number",
          "format": "double"
        }
      }
    },
    "couponCreateCouponResponse": {
      "type": "object",
      "properties": {
        "coupon": {
          "$ref": "#/definitions/couponStoreCoupon"
        }
      }
    },
    "couponCreateMileStoneRequest": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "threshold": {
          "type": "integer",
          "format": "int32"
        },
        "step": {
          "type": "integer",
          "format": "int32"
        },
        "rewards": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/CreateMileStoneRequestMilestoneReward"
          }
        }
      }
    },
    "couponCreateMileStoneResponse": {
      "type": "object",
      "properties": {
        "milestone": {
          "$ref": "#/definitions/couponMilestone"
        }
      }
    },
    "couponCurrency": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "format": "uint64"
        },
        "name": {
          "type": "string"
        },
        "code": {
          "type": "string"
        }
      }
    },
    "couponDeleteCouponRequest": {
      "type": "object",
      "properties": {
        "ids": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uint64"
          }
        }
      }
    },
    "couponDeleteMileStoneRequest": {
      "type": "object",
      "properties": {
        "ids": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uint64"
          }
        }
      }
    },
    "couponListCouponForCmsRequest": {
      "type": "object",
      "properties": {
        "pageIndex": {
          "type": "integer",
          "format": "int32"
        },
        "pageSize": {
          "type": "integer",
          "format": "int32"
        },
        "sortMethods": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/couponSortMethod"
          }
        },
        "customerIds": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "serviceIds": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "status": {
          "$ref": "#/definitions/couponCouponStatus"
        }
      }
    },
    "couponListCouponForCmsResponse": {
      "type": "object",
      "properties": {
        "coupons": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/couponStoreCoupon"
          }
        },
        "totalCount": {
          "type": "integer",
          "format": "int32"
        },
        "totalPages": {
          "type": "integer",
          "format": "int32"
        },
        "request": {
          "$ref": "#/definitions/couponListCouponForCmsRequest"
        }
      }
    },
    "couponListCouponForCustomerRequest": {
      "type": "object",
      "properties": {
        "pageIndex": {
          "type": "integer",
          "format": "int32"
        },
        "pageSize": {
          "type": "integer",
          "format": "int32"
        },
        "sortMethods": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/couponSortMethod"
          }
        },
        "storeId": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "serviceIds": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "status": {
          "$ref": "#/definitions/couponCouponStatus"
        }
      }
    },
    "couponListCouponForCustomerResponse": {
      "type": "object",
      "properties": {
        "coupons": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/couponStoreCoupon"
          }
        },
        "totalCount": {
          "type": "integer",
          "format": "int32"
        },
        "totalPages": {
          "type": "integer",
          "format": "int32"
        },
        "request": {
          "$ref": "#/definitions/couponListCouponForCustomerRequest"
        }
      }
    },
    "couponListCurrencyResponse": {
      "type": "object",
      "properties": {
        "currencies": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/couponCurrency"
          }
        },
        "totalPage": {
          "type": "integer",
          "format": "int32"
        },
        "totalCount": {
          "type": "integer",
          "format": "int32"
        },
        "request": {
          "$ref": "#/definitions/couponListProgressRequest"
        }
      }
    },
    "couponListMileStoneRequest": {
      "type": "object",
      "properties": {
        "pageIndex": {
          "type": "integer",
          "format": "int32"
        },
        "pageSize": {
          "type": "integer",
          "format": "int32"
        },
        "sortMethods": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/couponSortMethod"
          }
        },
        "storeIds": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "couponListMileStoneResponse": {
      "type": "object",
      "properties": {
        "milestones": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/couponMilestone"
          }
        },
        "totalCount": {
          "type": "integer",
          "format": "int32"
        },
        "totalPages": {
          "type": "integer",
          "format": "int32"
        },
        "request": {
          "$ref": "#/definitions/couponListMileStoneRequest"
        }
      }
    },
    "couponListProgressRequest": {
      "type": "object",
      "properties": {
        "storeIds": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "pageIndex": {
          "type": "integer",
          "format": "int32"
        },
        "pageSize": {
          "type": "integer",
          "format": "int32"
        },
        "sortMethods": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/couponSortMethod"
          }
        }
      }
    },
    "couponMilestone": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "format": "uint64"
        },
        "type": {
          "$ref": "#/definitions/couponMilestoneType"
        },
        "threshold": {
          "type": "integer",
          "format": "int32"
        },
        "step": {
          "type": "integer",
          "format": "int32"
        },
        "storeId": {
          "type": "string"
        },
        "rewards": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/couponReward"
          }
        }
      }
    },
    "couponMilestoneType": {
      "type": "string",
      "enum": [
        "MILESTONE_TYPE_UNKNOWN",
        "MILESTONE_TYPE_FIXED",
        "MILESTONE_TYPE_RECURRING"
      ],
      "default": "MILESTONE_TYPE_UNKNOWN"
    },
    "couponReserveCouponRequest": {
      "type": "object",
      "properties": {
        "code": {
          "type": "string"
        },
        "bookingId": {
          "type": "string"
        },
        "serviceIds": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "customerId": {
          "type": "string"
        },
        "storeId": {
          "type": "string"
        }
      }
    },
    "couponReward": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "format": "uint64"
        },
        "couponValue": {
          "type": "number",
          "format": "double"
        },
        "expiredDuration": {
          "type": "number",
          "format": "double"
        },
        "currencyId": {
          "type": "string",
          "format": "uint64"
        },
        "usageLimit": {
          "type": "integer",
          "format": "int32"
        },
        "milestoneId": {
          "type": "string",
          "format": "uint64"
        },
        "couponType": {
          "$ref": "#/definitions/couponCouponType"
        },
        "serviceIds": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uint64"
          }
        }
      }
    },
    "couponSortMethod": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "type": {
          "$ref": "#/definitions/couponSortType"
        }
      }
    },
    "couponSortType": {
      "type": "string",
      "enum": [
        "SORT_TYPE_UNKNOWN",
        "SORT_TYPE_ASC",
        "SORT_TYPE_DESC"
      ],
      "default": "SORT_TYPE_UNKNOWN"
    },
    "couponStoreCoupon": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "format": "uint64"
        },
        "code": {
          "type": "string"
        },
        "storeId": {
          "type": "string"
        },
        "expiredAt": {
          "type": "string",
          "format": "date-time"
        },
        "customerId": {
          "type": "string"
        },
        "serviceIds": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "currencyId": {
          "type": "string",
          "format": "uint64"
        },
        "couponType": {
          "$ref": "#/definitions/couponCouponType"
        },
        "status": {
          "$ref": "#/definitions/couponCouponStatus"
        },
        "usageLimit": {
          "type": "integer",
          "format": "int32"
        },
        "usedCount": {
          "type": "integer",
          "format": "int32"
        },
        "reservedCount": {
          "type": "integer",
          "format": "int32"
        },
        "couponUsages": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/couponCouponUsage"
          }
        },
        "couponValue": {
          "type": "number",
          "format": "double"
        }
      }
    },
    "couponUnReserveCouponRequest": {
      "type": "object",
      "properties": {
        "bookingId": {
          "type": "string"
        },
        "storeId": {
          "type": "string"
        }
      }
    },
    "protobufAny": {
      "type": "object",
      "properties": {
        "@type": {
          "type": "string"
        }
      },
      "additionalProperties": {}
    },
    "rpcStatus": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    }
  }
}
